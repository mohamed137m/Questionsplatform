<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø©: Ø¯Ø±Ø§Ø³Ø§Øª Ù…Ø­Ø§Ø³Ø¨ÙŠØ©</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts: Tajawal for Arabic -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">

    <!-- Chosen Palette: Warm Neutrals (Sand/Beige) with Calming Sage Green Accents -->
    <!-- Application Structure Plan:
         1. **Dashboard (Home):** A central hub displaying study modules (topics) and overall progress. This uses a grid layout for easy access.
         2. **Study Mode (Quiz Interface):** The core interactive element. Users focus on one question at a time. Immediate feedback (explanation) is provided to reinforce learning (Active Recall).
         3. **Topic Explorer:** A filtered view to study specific sections (e.g., Cost Accounting only).
         4. **Analytics Dashboard:** Visualizes performance using Chart.js to identify weak areas.
         
         WHY: This structure breaks down the dense source report into manageable chunks, transforming passive reading into active testing.
    -->

    <!-- Visualization & Content Choices:
         - **Doughnut Chart:** Shows the distribution of questions across topics to give users an idea of the curriculum weight.
         - **Bar Chart:** Tracks user performance (Correct vs. Incorrect) per topic to highlight areas needing improvement.
         - **Interactive Cards:** Used for questions to focus attention.
         - **Progress Bars:** Provide a sense of accomplishment during quizzes.
         - **Justification:** Charts provide quick insights into study progress, while the card-based quiz interface is standard for effective learning apps.
         - **Library:** Chart.js is used for its responsiveness and ease of updating via JS.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #FDFCF8; /* Warm off-white */
            color: #4A4A4A;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #F1F0EA;
        }
        ::-webkit-scrollbar-thumb {
            background: #A3B18A;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #588157;
        }

        /* Chart Container Styling - MANDATORY SPECS */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Base height */
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Utility Classes */
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .slide-in { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }

        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }

        /* Palette Classes */
        .bg-sage-light { background-color: #DAD7CD; }
        .bg-sage-medium { background-color: #A3B18A; }
        .bg-sage-dark { background-color: #588157; }
        .bg-sage-darker { background-color: #3A5A40; }
        
        .text-sage-dark { color: #3A5A40; }
        
        .btn-primary {
            background-color: #588157;
            color: white;
            transition: all 0.2s;
        }
        .btn-primary:hover {
            background-color: #3A5A40;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn-option {
            background-color: #FFFFFF;
            border: 2px solid #E5E7EB;
            color: #4B5563;
            transition: all 0.2s;
        }
        .btn-option:hover:not(:disabled) {
            border-color: #A3B18A;
            background-color: #F9FAFB;
        }
        .btn-option.selected-correct {
            background-color: #DEF7EC;
            border-color: #03543F;
            color: #03543F;
        }
        .btn-option.selected-incorrect {
            background-color: #FDE8E8;
            border-color: #9B1C1C;
            color: #9B1C1C;
        }
        .btn-option.correct-answer {
            background-color: #DEF7EC;
            border-color: #057A55;
            box-shadow: 0 0 0 2px #057A55;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b border-gray-100 sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center gap-3">
                    <span class="text-2xl">ğŸ“š</span>
                    <h1 class="text-xl font-bold text-sage-dark">Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ Ø§Ù„Ø°ÙƒÙŠ</h1>
                </div>
                <div class="flex items-center gap-4">
                    <button onclick="app.showDashboard()" class="text-gray-600 hover:text-sage-dark font-medium transition">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                    <button onclick="app.showAnalytics()" class="text-gray-600 hover:text-sage-dark font-medium transition">Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main id="main-container" class="flex-grow container mx-auto px-4 py-8">
        <!-- Content injected by JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-auto">
        <div class="container mx-auto px-4 py-6 text-center text-gray-500 text-sm">
            <p>ØªÙ… ØªØµÙ…ÙŠÙ… Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ©.</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- 1. DATA STORE (Extracted and Fully Populated from Source Reports) ---
        const sourceData = {
            modules: [
                { id: 'concepts', title: 'Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… ÙˆØ§Ù„Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©', icon: 'ğŸ’¡', desc: 'ØªØ¹Ø±ÙŠÙØ§Øª Ø§Ù„Ø£ØµÙˆÙ„ØŒ Ø§Ù„Ø®ØµÙˆÙ…ØŒ Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ© ÙˆØ·Ø¨ÙŠØ¹Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª.' },
                { id: 'journal', title: 'Ù‚ÙŠÙˆØ¯ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©', icon: 'ğŸ“', desc: 'Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù…Ø¯ÙŠÙ† ÙˆØ§Ù„Ø¯Ø§Ø¦Ù† ÙˆØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ù…Ø®ØªÙ„ÙØ©.' },
                { id: 'statements', title: 'Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ø§Ù„ÙŠØ©', icon: 'ğŸ“Š', desc: 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø®Ù„ØŒ Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø§Ù„ÙŠØŒ Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚ ÙˆØ§Ù„Ø¥Ù‡Ù„Ø§Ùƒ.' },
                { id: 'cost', title: 'Ù…Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ†', icon: 'ğŸ­', desc: 'Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©/ØºÙŠØ± Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©ØŒ Ø§Ù„Ø«Ø§Ø¨ØªØ©/Ø§Ù„Ù…ØªØºÙŠØ±Ø©ØŒ ÙˆØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø®Ø²ÙˆÙ†.' },
                { id: 'cashflow', title: 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ù†Ù‚Ø¯ÙŠØ©', icon: 'ğŸ’¸', desc: 'Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ©ØŒ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ©ØŒ ÙˆØ§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ©.' },
                { id: 'tf', title: 'ØªØ­Ø¯ÙŠ ØµØ­ Ø£Ù… Ø®Ø·Ø£', icon: 'âœ…', desc: 'Ù…Ø±Ø§Ø¬Ø¹Ø© Ø³Ø±ÙŠØ¹Ø© Ù„Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø¹Ø¨Ø± Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØµÙˆØ§Ø¨ ÙˆØ§Ù„Ø®Ø·Ø£.' }
            ],
            questions: [
                // --- Basic Concepts & Accounting Cycle (MCQ) ---
                { id: 'c1', module: 'concepts', type: 'MCQ', q: 'Accounting is mainly concerned with:', options: ['Selling products', 'Measuring, processing, and communicating financial information', 'Hiring employees', 'Producing goods'], correct: 1, explanation: 'Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© ØªÙ‡ØªÙ… Ø¨Ø´ÙƒÙ„ Ø£Ø³Ø§Ø³ÙŠ Ø¨Ù‚ÙŠØ§Ø³ ÙˆÙ…Ø¹Ø§Ù„Ø¬Ø© ÙˆØªÙˆØµÙŠÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©.' },
                { id: 'c2', module: 'concepts', type: 'MCQ', q: 'Which of the following is not an asset?', options: ['Machinery', 'Equipment', 'Stock', 'Creditors'], correct: 3, explanation: 'Ø§Ù„Ø¯Ø§Ø¦Ù†ÙˆÙ† (Creditors) ÙŠØ¹ØªØ¨Ø±ÙˆÙ† Ø§Ù„ØªØ²Ø§Ù…Ø§Ù‹ (Liability) ÙˆÙ„ÙŠØ³ Ø£ØµÙ„Ø§Ù‹.' },
                { id: 'c3', module: 'concepts', type: 'MCQ', q: 'The General Journal is used to:', options: ['Record only cash transactions', 'Record all business transactions in chronological order', 'Prepare the income statement', 'Record only sales transactions'], correct: 1, explanation: 'Ø¯ÙØªØ± Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø© ÙŠØ³Ø¬Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¨ØªØ³Ù„Ø³Ù„ Ø²Ù…Ù†ÙŠ.' },
                { id: 'c4', module: 'concepts', type: 'MCQ', q: 'In accounting, capital represents:', options: ['The company debts', 'The owner\'s financial interest in the business', 'Goods bought for resale', 'Daily expenses'], correct: 1, explanation: 'Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ ÙŠÙ…Ø«Ù„ Ø§Ù„Ø­Ù‚ Ø§Ù„Ù…Ø§Ù„ÙŠ Ù„Ù„Ù…Ø§Ù„Ùƒ ÙÙŠ Ø§Ù„Ù†Ø´Ø§Ø·.' },
                { id: 'c5', module: 'concepts', type: 'MCQ', q: 'Which side represents assets and expenses?', options: ['Debit', 'Credit', 'Liability', 'Capital'], correct: 0, explanation: 'Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ù…Ø¯ÙŠÙ† (Debit) Ù‡Ùˆ Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„Ù…ØµØ±ÙˆÙØ§Øª.' },
                { id: 'c6', module: 'concepts', type: 'MCQ', q: 'The Balance Sheet shows:', options: ['Profit or Loss', 'Assets, Capital, and Liabilities', 'Only Assets', 'Only Expense'], correct: 1, explanation: 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø§Ù„ÙŠ ØªØ¹Ø±Ø¶ Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„Ø®ØµÙˆÙ… ÙˆØ±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„.' },
                { id: 'c7', module: 'concepts', type: 'MCQ', q: 'The accounting equation can be written as:', options: ['Assets = Capital - Liabilities', 'Assets = Liabilities + Owner\'s Equity', 'Capital = Assets - Owner\'s Equity', 'Assets = Revenue - Expenses'], correct: 1, explanation: 'Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ©: Ø§Ù„Ø£ØµÙˆÙ„ = Ø§Ù„Ø®ØµÙˆÙ… + Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ©.' },
                { id: 'c8', module: 'concepts', type: 'MCQ', q: 'Which of the following is a liability?', options: ['Cash', 'Furniture', 'Accounts Payable', 'Purchases'], correct: 2, explanation: 'Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹ (Accounts Payable) Ù‡ÙŠ Ø§Ù„ØªØ²Ø§Ù….' },
                { id: 'c9', module: 'concepts', type: 'MCQ', q: 'Fixed assets are:', options: ['Used for resale', 'Used in the business for a long period', 'Short-term resources', 'Current obligations'], correct: 1, explanation: 'Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ø«Ø§Ø¨ØªØ© ØªØ³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ù†Ø´Ø§Ø· Ù„ÙØªØ±Ø© Ø·ÙˆÙŠÙ„Ø©.' },
                { id: 'c10', module: 'concepts', type: 'MCQ', q: 'The trial balance is prepared to:', options: ['Show the company\'s profit', 'Verify that debits equal credits', 'Record new transactions', 'Replace the ledger'], correct: 1, explanation: 'Ø§Ù„Ù‡Ø¯Ù Ù…Ù† Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ù‡Ùˆ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆØ§Ø²Ù† Ø§Ù„Ø£Ø±ØµØ¯Ø© Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© ÙˆØ§Ù„Ø¯Ø§Ø¦Ù†Ø©.' },
                { id: 'c11', module: 'concepts', type: 'MCQ', q: 'The ledger contains individual accounts for:', options: ['Only assets and liabilities', 'Only revenues and expenses', 'All assets, liabilities, revenues, and expenses', 'Only capital accounts'], correct: 2, explanation: 'Ø¯ÙØªØ± Ø§Ù„Ø£Ø³ØªØ§Ø° ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø­Ø³Ø§Ø¨Ø§Øª Ø¬Ù…ÙŠØ¹ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ø§Ù„ÙŠØ©.' },
                { id: 'c12', module: 'concepts', type: 'MCQ', q: 'The final step in the accounting cycle is:', options: ['Posting to the ledger', 'Preparing closing entries', 'Making journal entries', 'Preparing the trial balance'], correct: 1, explanation: 'Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø£Ø®ÙŠØ±Ø© Ù‡ÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚ÙŠÙˆØ¯ Ø§Ù„Ø¥Ù‚ÙØ§Ù„ (Closing Entries).' },

                // --- Journal Entries (MCQ) ---
                { id: 'j1', module: 'journal', type: 'MCQ', q: 'When goods are sold for cash, the correct journal entry is:', options: ['Cash (Dr), Sales (Cr)', 'Sales (Dr), Cash (Cr)', 'Purchases (Dr), Cash (Cr)', 'Cash (Dr), Purchases (Cr)'], correct: 0, explanation: 'Ø¹Ù†Ø¯ Ø§Ù„Ø¨ÙŠØ¹ Ù†Ù‚Ø¯Ø§Ù‹: Ø§Ù„Ù†Ù‚Ø¯ÙŠØ© (Ø£ØµÙ„) ØªØ²ÙŠØ¯ (Ù…Ø¯ÙŠÙ†)ØŒ ÙˆØ§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Ø¥ÙŠØ±Ø§Ø¯) ØªØ²ÙŠØ¯ (Ø¯Ø§Ø¦Ù†).' },
                { id: 'j2', module: 'journal', type: 'MCQ', q: 'When the owner withdraws cash for personal use, debited account is:', options: ['Capital', 'Sales', 'Drawings', 'Purchases'], correct: 2, explanation: 'Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³Ø­ÙˆØ¨Ø§Øª (Drawings) ÙŠÙƒÙˆÙ† Ù…Ø¯ÙŠÙ†Ø§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø³Ø­Ø¨.' },
                { id: 'j3', module: 'journal', type: 'MCQ', q: 'Purchased equipment for L.E 10,000 in cash. Entry?', options: ['Equipment (Dr), Cash (Cr)', 'Cash (Dr), Equipment (Cr)', 'Equipment (Cr), Cash (Dr)', 'Purchases (Dr), Cash (Cr)'], correct: 0, explanation: 'Ø²ÙŠØ§Ø¯Ø© Ø£ØµÙ„ (Ù…Ø¹Ø¯Ø§Øª) Ù…Ø¯ÙŠÙ†ØŒ Ù†Ù‚Øµ Ø£ØµÙ„ (Ù†Ù‚Ø¯ÙŠØ©) Ø¯Ø§Ø¦Ù†.' },
                { id: 'j4', module: 'journal', type: 'MCQ', q: 'Paying wages in cash is recorded as:', options: ['Wages (Cr), Cash (Dr)', 'Wages (Dr), Cash (Cr)', 'Cash (Dr), Wages (Cr)', 'Drawings (Dr), Cash (Cr)'], correct: 1, explanation: 'Ø§Ù„Ù…ØµØ±ÙˆÙ (Ø£Ø¬ÙˆØ±) Ù…Ø¯ÙŠÙ†ØŒ ÙˆØ§Ù„Ù†Ù‚Ø¯ÙŠØ© Ø¯Ø§Ø¦Ù†.' },
                { id: 'j5', module: 'journal', type: 'MCQ', q: 'Buying goods on credit from Mohamed Ahmed:', options: ['Purchases (Dr), Cash (Cr)', 'Purchases (Dr), Mohamed Ahmed (Cr)', 'Cash (Dr), Purchases (Cr)', 'Mohamed Ahmed (Dr), Purchases (Cr)'], correct: 1, explanation: 'Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª Ù…Ø¯ÙŠÙ†ØŒ ÙˆØ§Ù„Ø¯Ø§Ø¦Ù† (Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯) Ø¯Ø§Ø¦Ù†.' },
                { id: 'j6', module: 'journal', type: 'MCQ', q: 'The owner\'s investment is recorded as:', options: ['Debit Capital', 'Credit Capital', 'Debit Cash', 'Credit Cash'], correct: 1, explanation: 'Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ (Capital) Ø¯Ø§Ø¦Ù† Ø¹Ù†Ø¯ Ø§Ù„Ø²ÙŠØ§Ø¯Ø© (Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„Ù…Ø§Ù„Ùƒ).' },
                { id: 'j7', module: 'journal', type: 'MCQ', q: 'Paying the creditor\'s account in cash is recorded as:', options: ['Creditors (Dr), Cash (Cr)', 'Cash (Dr), Creditors (Cr)', 'Purchases (Dr), Cash (Cr)', 'Cash (Cr), Purchases (Dr)'], correct: 0, explanation: 'Ù†Ù‚Øµ Ø§Ù„ØªØ²Ø§Ù… (Ø¯Ø§Ø¦Ù†ÙˆÙ†) Ù…Ø¯ÙŠÙ†ØŒ Ù†Ù‚Øµ Ù†Ù‚Ø¯ÙŠØ© Ø¯Ø§Ø¦Ù†.' },
                { id: 'j8', module: 'journal', type: 'MCQ', q: 'When the company receives cash from a customer, the entry is:', options: ['Cash (Dr), Accounts Receivable (Cr)', 'Accounts Receivable (Dr), Cash (Cr)', 'Sales (Dr), Cash (Cr)', 'Cash (Dr), Sales (Dr)'], correct: 0, explanation: 'Ø²ÙŠØ§Ø¯Ø© Ù†Ù‚Ø¯ÙŠØ© (Dr)ØŒ ÙˆÙ†Ù‚Øµ Ø­Ø³Ø§Ø¨Ø§Øª Ù‚Ø¨Ø¶ (Cr).' },
                
                // --- Financial Statements (MCQ) ---
                { id: 's1', module: 'statements', type: 'MCQ', q: 'Net income is calculated as:', options: ['Expenses - Revenues', 'Revenues + Expenses', 'Revenues - Expenses', 'Assets - Liabilities'], correct: 2, explanation: 'ØµØ§ÙÙŠ Ø§Ù„Ø¯Ø®Ù„ = Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª - Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª.' },
                { id: 's2', module: 'statements', type: 'MCQ', q: 'According to accrual basis, revenue is recorded when:', options: ['Cash is received', 'The service is performed', 'The owner withdraws money', 'Customer pays later'], correct: 1, explanation: 'Ø£Ø³Ø§Ø³ Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚ ÙŠØ³Ø¬Ù„ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø¹Ù†Ø¯ Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø®Ø¯Ù…Ø© Ø¨ØºØ¶ Ø§Ù„Ù†Ø¸Ø± Ø¹Ù† Ø§Ù„Ù†Ù‚Ø¯.' },
                { id: 's3', module: 'statements', type: 'MCQ', q: 'Depreciation expense is:', options: ['Increase in value', 'A part of cost assigned as expense', 'Total value at start', 'A liability'], correct: 1, explanation: 'Ø§Ù„Ø¥Ù‡Ù„Ø§Ùƒ Ù‡Ùˆ ØªÙˆØ²ÙŠØ¹ ØªÙƒÙ„ÙØ© Ø§Ù„Ø£ØµÙ„ ÙƒÙ…ØµØ±ÙˆÙ Ø¹Ù„Ù‰ ÙØªØ±Ø§Øª Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡.' },
                { id: 's4', module: 'statements', type: 'MCQ', q: 'The Income Statement must be prepared before:', options: ['The Balance Sheet', 'The Journal', 'The Ledger', 'The Trial Balance'], correct: 0, explanation: 'ÙŠØ¬Ø¨ Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø®Ù„ Ø£ÙˆÙ„Ø§Ù‹ Ù„ØªØ­Ø¯ÙŠØ¯ ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ø°ÙŠ ÙŠØ±Ø­Ù„ Ù„Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©.' },
                { id: 's5', module: 'statements', type: 'MCQ', q: 'Withdrawals reduce:', options: ['Revenues', 'Expenses', 'Capital', 'Assets only'], correct: 2, explanation: 'Ø§Ù„Ù…Ø³Ø­ÙˆØ¨Ø§Øª ØªÙ‚Ù„Ù„ Ù…Ù† Ø±Ø£Ø³ Ù…Ø§Ù„ Ø§Ù„Ù…Ø§Ù„Ùƒ.' },
                { id: 's6', module: 'statements', type: 'MCQ', q: 'If revenues = 10,000, expenses = 7,200, and withdrawals = 500, the increase in owner\'s equity is:', options: ['2,800', '2,300', '-2,800', '10,500'], correct: 1, explanation: 'ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ (2800) - Ø§Ù„Ù…Ø³Ø­ÙˆØ¨Ø§Øª (500) = 2,300.' },
                { id: 's7', module: 'statements', type: 'MCQ', q: 'The Statement of Changes in Owner\'s Equity is mainly affected by:', options: ['Assets and Liabilities', 'Investments, Withdrawals, and Net Income', 'Cash only', 'Depreciation expense'], correct: 1, explanation: 'Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØºÙŠØ± ÙÙŠ Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ©.' },

                // --- Cost Accounting & Inventory (MCQ) ---
                { id: 'ca1', module: 'cost', type: 'MCQ', q: 'A variable cost is:', options: ['Depreciation', 'Direct materials', 'Factory rent', 'Insurance'], correct: 1, explanation: 'Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© Ù…ØªØºÙŠØ±Ø© Ù„Ø£Ù†Ù‡Ø§ ØªØ²ÙŠØ¯ Ù…Ø¹ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬.' },
                { id: 'ca2', module: 'cost', type: 'MCQ', q: 'Fixed costs:', options: ['Change with output', 'Remain constant regardless of output', 'Are always direct', 'Include raw materials'], correct: 1, explanation: 'Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ø«Ø§Ø¨ØªØ© ØªØ¸Ù„ Ø«Ø§Ø¨ØªØ© Ø¨ØºØ¶ Ø§Ù„Ù†Ø¸Ø± Ø¹Ù† Ø­Ø¬Ù… Ø§Ù„Ø¥Ù†ØªØ§Ø¬.' },
                { id: 'ca3', module: 'cost', type: 'MCQ', q: 'Prime cost includes:', options: ['Indirect labor', 'Direct materials + labor + expenses', 'All overheads', 'Factory rent'], correct: 1, explanation: 'Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© (Prime Cost) Ù‡ÙŠ Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©.' },
                { id: 'ca4', module: 'cost', type: 'MCQ', q: 'Indirect expenses include:', options: ['Raw materials', 'Rent and lighting', 'Direct labor', 'Direct expenses'], correct: 1, explanation: 'Ø§Ù„Ø¥ÙŠØ¬Ø§Ø± ÙˆØ§Ù„Ø¥Ø¶Ø§Ø¡Ø© ØªØ¹ØªØ¨Ø± Ù…ØµØ§Ø±ÙŠÙ ØºÙŠØ± Ù…Ø¨Ø§Ø´Ø±Ø© (Overheads).' },
                { id: 'ca5', module: 'cost', type: 'MCQ', q: 'A cost center is:', options: ['A profit unit', 'A department to which costs can be charged', 'A warehouse', 'A customer'], correct: 1, explanation: 'Ù…Ø±ÙƒØ² Ø§Ù„ØªÙƒÙ„ÙØ© Ù‡Ùˆ Ù‚Ø³Ù… Ø£Ùˆ ÙˆØ­Ø¯Ø© ÙŠØªÙ… ØªØ¬Ù…ÙŠØ¹ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø¹Ù„ÙŠÙ‡Ø§.' },
                { id: 'ca6', module: 'cost', type: 'MCQ', q: 'Overheads include:', options: ['All direct labor', 'Indirect expenses only', 'Indirect materials + Indirect labor + Indirect expenses', 'Selling costs'], correct: 2, explanation: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ØªØ´Ù…Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± ØºÙŠØ± Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©.' },
                { id: 'ca7', module: 'cost', type: 'MCQ', q: 'Direct costs are:', options: ['Costs that cannot be traced to output', 'Always overheads', 'Costs that can be identified directly with each unit of output.', 'Always fixed'], correct: 2, explanation: 'Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ¯Ù‡Ø§ Ù„ÙƒÙ„ ÙˆØ­Ø¯Ø© Ø¥Ù†ØªØ§Ø¬.' },
                { id: 'ca8', module: 'cost', type: 'MCQ', q: 'When production increases, total fixed costs:', options: ['Increase', 'Decrease', 'Remain the same', 'Become variable'], correct: 2, explanation: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ø«Ø§Ø¨ØªØ© Ù„Ø§ ÙŠØªØºÙŠØ± Ù…Ø¹ ØªØºÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ø¥Ù†ØªØ§Ø¬.' },
                { id: 'ca9', module: 'cost', type: 'MCQ', q: 'Which is a direct expense?', options: ['Rent', 'Electricity', 'Salary of supervisor', 'Designer fee for a special product'], correct: 3, explanation: 'Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØµÙ…Ù… Ù„Ù…Ù†ØªØ¬ Ù…Ø¹ÙŠÙ† ÙŠÙ…ÙƒÙ† ØªØªØ¨Ø¹Ù‡Ø§ Ù…Ø¨Ø§Ø´Ø±Ø©.' },

                // --- Cash Flow (MCQ) ---
                { id: 'cf1', module: 'cashflow', type: 'MCQ', q: 'Which is an operating cash inflow?', options: ['Selling equipment', 'Issuing shares', 'Cash received from customers', 'Borrowing from bank'], correct: 2, explanation: 'Ø§Ù„Ù†Ù‚Ø¯ÙŠØ© Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù‡ÙŠ Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ.' },
                { id: 'cf2', module: 'cashflow', type: 'MCQ', q: 'Buying a building appears under:', options: ['Operating', 'Investing', 'Financing', 'Non-cash'], correct: 1, explanation: 'Ø´Ø±Ø§Ø¡ Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ø«Ø§Ø¨ØªØ© (Ù…Ø¨Ù†Ù‰) Ù‡Ùˆ Ù†Ø´Ø§Ø· Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠ.' },
                { id: 'cf3', module: 'cashflow', type: 'MCQ', q: 'Issuing bonds results in:', options: ['Operating inflow', 'Operating outflow', 'Financing inflow', 'Investing inflow'], correct: 2, explanation: 'Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø³Ù†Ø¯Ø§Øª ÙŠØ¹ØªØ¨Ø± Ù†Ø´Ø§Ø· ØªÙ…ÙˆÙŠÙ„ÙŠ (ØªØ¯ÙÙ‚ Ø¯Ø§Ø®Ù„).' },
                { id: 'cf4', module: 'cashflow', type: 'MCQ', q: 'Dividends paid appear in:', options: ['Operating', 'Investing', 'Financing', 'Notes'], correct: 2, explanation: 'ØªÙˆØ²ÙŠØ¹Ø§Øª Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø© ØªØ¹ØªØ¨Ø± Ù†Ø´Ø§Ø· ØªÙ…ÙˆÙŠÙ„ÙŠ.' },
                { id: 'cf5', module: 'cashflow', type: 'MCQ', q: 'Under the direct method, the operating section starts with:', options: ['Net income', 'Total assets', 'Cash receipts', 'Retained earnings'], correct: 2, explanation: 'Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© ØªØ¨Ø¯Ø£ Ø¨Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‚Ø¨ÙˆØ¶Ø§Øª Ø§Ù„Ù†Ù‚Ø¯ÙŠØ© Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ©.' },
                { id: 'cf6', module: 'cashflow', type: 'MCQ', q: 'Which is added to net income under the indirect method?', options: ['Increase in inventory', 'Decrease in accounts receivable', 'Capital gain', 'Increase in prepaid expenses'], correct: 1, explanation: 'Ù†Ù‚Øµ Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù‚Ø¨Ø¶ (Ø£ØµÙ„ Ù…ØªØ¯Ø§ÙˆÙ„) ÙŠØ¹Ù†ÙŠ ØªØ¯ÙÙ‚ Ù†Ù‚Ø¯ÙŠØŒ ÙˆÙŠØ¶Ø§Ù Ù„ØµØ§ÙÙŠ Ø§Ù„Ø¯Ø®Ù„.' },
                { id: 'cf7', module: 'cashflow', type: 'MCQ', q: 'Cash received from selling fixed assets is part of:', options: ['Financing activities', 'Operating activities', 'Investing activities', 'None'], correct: 2, explanation: 'Ø¨ÙŠØ¹ Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ø«Ø§Ø¨ØªØ© Ù‡Ùˆ Ù†Ø´Ø§Ø· Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠ.' },
                { id: 'cf8', module: 'cashflow', type: 'MCQ', q: 'Paying for inventory is:', options: ['Operating outflow', 'Investing outflow', 'Financing outflow', 'Operating inflow'], correct: 0, explanation: 'Ø¯ÙØ¹ Ø«Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ù†Ø´Ø§Ø· ØªØ´ØºÙŠÙ„ÙŠ Ø®Ø§Ø±Ø¬.' },


                // --- True/False (T/F) ---
                { id: 'tf1', module: 'tf', type: 'TF', q: 'Accounting is a system for producing and selling goods.', options: ['True', 'False'], correct: 1, explanation: 'Ø®Ø·Ø£. Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© Ù†Ø¸Ø§Ù… Ù„Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©.' },
                { id: 'tf2', module: 'tf', type: 'TF', q: 'Debtors are people who owe money to the business.', options: ['True', 'False'], correct: 0, explanation: 'ØµØ­. Ø§Ù„Ù…Ø¯ÙŠÙ†ÙˆÙ† (Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡) Ø¹Ù„ÙŠÙ‡Ù… Ø£Ù…ÙˆØ§Ù„ Ù„Ù„Ø´Ø±ÙƒØ©.' },
                { id: 'tf3', module: 'tf', type: 'TF', q: 'The double-entry system means every transaction affects only one account.', options: ['True', 'False'], correct: 1, explanation: 'Ø®Ø·Ø£. Ø§Ù„Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø­Ø³Ø§Ø¨ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.' },
                { id: 'tf4', module: 'tf', type: 'TF', q: 'Current liabilities are long-term debts such as mortgage loans.', options: ['True', 'False'], correct: 1, explanation: 'Ø®Ø·Ø£. Ù‡Ø°Ù‡ Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ø£Ø¬Ù„.' },
                { id: 'tf5', module: 'tf', type: 'TF', q: 'Depreciation means the increase in value of a fixed asset.', options: ['True', 'False'], correct: 1, explanation: 'Ø®Ø·Ø£. Ø§Ù„Ø¥Ù‡Ù„Ø§Ùƒ Ù‡Ùˆ Ù†Ù‚Øµ ÙÙŠ Ø§Ù„Ù‚ÙŠÙ…Ø©.' },
                { id: 'tf6', module: 'tf', type: 'TF', q: 'Paying wages is considered an operating cash outflow.', options: ['True', 'False'], correct: 0, explanation: 'ØµØ­. Ø§Ù„Ø£Ø¬ÙˆØ± Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠ.' },
                { id: 'tf7', module: 'tf', type: 'TF', q: 'Issuing shares is a financing activity.', options: ['True', 'False'], correct: 0, explanation: 'ØµØ­. Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø£Ø³Ù‡Ù… ØªÙ…ÙˆÙŠÙ„.' },
                { id: 'tf8', module: 'tf', type: 'TF', q: 'Variable costs change with the level of production.', options: ['True', 'False'], correct: 0, explanation: 'ØµØ­. Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ù…ØªØºÙŠØ±Ø© ØªØªØ¨Ø¹ Ø­Ø¬Ù… Ø§Ù„Ø¥Ù†ØªØ§Ø¬.' },
                { id: 'tf9', module: 'tf', type: 'TF', q: 'The Income Statement is prepared after the Balance Sheet.', options: ['True', 'False'], correct: 1, explanation: 'Ø®Ø·Ø£. Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø®Ù„ ØªØ¹Ø¯ Ù‚Ø¨Ù„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø§Ù„ÙŠ.' },
                { id: 'tf10', module: 'tf', type: 'TF', q: 'Accrual basis means revenues are recorded when cash is received.', options: ['True', 'False'], correct: 1, explanation: 'Ø®Ø·Ø£. Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù†Ù‚Ø¯ÙŠ.' },
                { id: 'tf11', module: 'tf', type: 'TF', q: 'The Accounting Equation can be expressed as Assets = Liabilities + Owner\'s Equity.', options: ['True', 'False'], correct: 0, explanation: 'ØµØ­. Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ© ØµØ­ÙŠØ­Ø©.' },
                { id: 'tf12', module: 'tf', type: 'TF', q: 'The book value of an asset equals its cost minus accumulated depreciation.', options: ['True', 'False'], correct: 0, explanation: 'ØµØ­. Ù‡Ø°Ù‡ Ù‡ÙŠ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¯ÙØªØ±ÙŠØ©.' },
                { id: 'tf13', module: 'tf', type: 'TF', q: 'Adjusting entries are made at the end of the accounting period.', options: ['True', 'False'], correct: 0, explanation: 'ØµØ­. ØªÙØ¹Ø¯ Ù‚ÙŠÙˆØ¯ Ø§Ù„ØªØ³ÙˆÙŠØ© ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ©.' },
                { id: 'tf14', module: 'tf', type: 'TF', q: 'Direct materials are included in prime cost.', options: ['True', 'False'], correct: 0, explanation: 'ØµØ­. Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© Ù‡ÙŠ Ø¬Ø²Ø¡ Ø£Ø³Ø§Ø³ÙŠ Ù…Ù† Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©.' },
                { id: 'tf15', module: 'tf', type: 'TF', q: 'Indirect labor is part of prime cost.', options: ['True', 'False'], correct: 1, explanation: 'Ø®Ø·Ø£. Ø§Ù„Ø¹Ù…Ù„ ØºÙŠØ± Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø© (Overheads).' },
                { id: 'tf16', module: 'tf', type: 'TF', q: 'Fixed costs change directly with output.', options: ['True', 'False'], correct: 1, explanation: 'Ø®Ø·Ø£. Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ø«Ø§Ø¨ØªØ© Ù„Ø§ ØªØªØºÙŠØ± Ù…Ø¹ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¥Ù†ØªØ§Ø¬.' },
                { id: 'tf17', module: 'tf', type: 'TF', q: 'An increase in accounts payable is added to net income under the indirect method.', options: ['True', 'False'], correct: 0, explanation: 'ØµØ­. Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„Ù…ØªØ¯Ø§ÙˆÙ„Ø© ØªØ¶Ø§Ù Ù„ØµØ§ÙÙŠ Ø§Ù„Ø¯Ø®Ù„.' },
                { id: 'tf18', module: 'tf', type: 'TF', q: 'Selling land owned by the company is classified as a financing activity.', options: ['True', 'False'], correct: 1, explanation: 'Ø®Ø·Ø£. Ø¨ÙŠØ¹ Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ø«Ø§Ø¨ØªØ© Ù‡Ùˆ Ù†Ø´Ø§Ø· Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠ.' },
            ]
        };

        // --- 2. STATE MANAGEMENT ---
        let state = {
            currentModule: null,
            currentQuestionIndex: 0,
            activeQuestions: [],
            answers: {}, // Key: QuestionID, Value: IsCorrect (boolean)
            view: 'dashboard'
        };

        // --- 3. CONTROLLER LOGIC ---
        const app = {
            init: () => {
                app.showDashboard();
            },

            // Navigation
            showDashboard: () => {
                state.view = 'dashboard';
                const container = document.getElementById('main-container');
                container.innerHTML = `
                    <div class="fade-in max-w-5xl mx-auto">
                        <div class="text-center mb-10">
                            <h2 class="text-3xl font-bold text-gray-800 mb-4">Ø§Ø®ØªØ± ÙˆØ­Ø¯Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</h2>
                            <p class="text-gray-600">Ø§Ø®ØªØ± Ù…ÙˆØ¶ÙˆØ¹Ø§Ù‹ Ù„Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø­Ù„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØªØ«Ø¨ÙŠØª Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª.</p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            ${sourceData.modules.map(mod => `
                                <div onclick="app.startModule('${mod.id}')" class="bg-white rounded-xl p-6 shadow-sm border border-gray-100 cursor-pointer card-hover flex flex-col items-center text-center h-full">
                                    <div class="w-16 h-16 bg-sage-light rounded-full flex items-center justify-center text-3xl mb-4 text-sage-darker">
                                        ${mod.icon}
                                    </div>
                                    <h3 class="text-xl font-bold text-gray-800 mb-2">${mod.title}</h3>
                                    <p class="text-sm text-gray-500 mb-4 flex-grow">${mod.desc}</p>
                                    <span class="text-xs font-bold text-sage-dark bg-green-50 px-3 py-1 rounded-full">
                                        ${sourceData.questions.filter(q => q.module === mod.id).length} Ø³Ø¤Ø§Ù„
                                    </span>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div class="mt-12 bg-white rounded-2xl p-8 shadow-sm border border-gray-100 flex flex-col md:flex-row items-center justify-between gap-6">
                            <div>
                                <h3 class="text-xl font-bold text-gray-800 mb-2">Ù…Ø³ØªØ¹Ø¯ Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„ØŸ</h3>
                                <p class="text-gray-600">Ø§Ø®ØªØ¨Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØµÙˆÙ„ ÙÙŠ Ø¬Ù„Ø³Ø© ÙˆØ§Ø­Ø¯Ø©.</p>
                            </div>
                            <button onclick="app.startModule('all')" class="btn-primary px-8 py-3 rounded-lg font-bold text-lg shadow-lg transform hover:scale-105 transition">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„</button>
                        </div>
                    </div>
                `;
            },

            startModule: (moduleId) => {
                state.currentModule = moduleId;
                state.currentQuestionIndex = 0;
                
                // Filter questions
                if (moduleId === 'all') {
                    state.activeQuestions = [...sourceData.questions].sort(() => 0.5 - Math.random()); // Shuffle
                } else {
                    state.activeQuestions = sourceData.questions.filter(q => q.module === moduleId);
                }

                if (state.activeQuestions.length === 0) {
                    alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ù…ØªØ§Ø­Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ø­Ø§Ù„ÙŠØ§Ù‹.');
                    return;
                }

                app.renderQuizInterface();
            },

            renderQuizInterface: () => {
                const q = state.activeQuestions[state.currentQuestionIndex];
                const progress = ((state.currentQuestionIndex + 1) / state.activeQuestions.length) * 100;
                const container = document.getElementById('main-container');

                // Context Intro Paragraph (Requirement)
                const moduleInfo = sourceData.modules.find(m => m.id === q.module);
                const contextTitle = moduleInfo ? moduleInfo.title : 'Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¹Ø§Ù…Ø©';
                const contextDesc = moduleInfo ? moduleInfo.desc : 'Ø£Ø³Ø¦Ù„Ø© Ù…ØªÙ†ÙˆØ¹Ø© ØªØºØ·ÙŠ ÙƒØ§ÙØ© Ø§Ù„Ù…Ù†Ù‡Ø¬.';

                container.innerHTML = `
                    <div class="fade-in max-w-3xl mx-auto">
                        <!-- Header Context -->
                        <div class="mb-6 flex justify-between items-end">
                            <div>
                                <span class="text-sm font-bold text-sage-dark uppercase tracking-wider">Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ</span>
                                <h2 class="text-2xl font-bold text-gray-800">${contextTitle}</h2>
                            </div>
                            <span class="text-sm font-medium text-gray-500">Ø³Ø¤Ø§Ù„ ${state.currentQuestionIndex + 1} Ù…Ù† ${state.activeQuestions.length}</span>
                        </div>

                        <!-- Progress Bar -->
                        <div class="w-full bg-gray-200 rounded-full h-2 mb-8">
                            <div class="bg-sage-dark h-2 rounded-full transition-all duration-500" style="width: ${progress}%"></div>
                        </div>

                        <!-- Question Card -->
                        <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden relative">
                            <div class="p-8">
                                <span class="inline-block px-3 py-1 rounded text-xs font-bold bg-gray-100 text-gray-600 mb-4">${q.type === 'MCQ' ? 'Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯' : 'ØµØ­ Ø£Ù… Ø®Ø·Ø£'}</span>
                                <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-8 leading-relaxed" dir="ltr">${q.q}</h3>
                                
                                <div class="space-y-3" id="options-container">
                                    ${q.options.map((opt, idx) => `
                                        <button onclick="app.checkAnswer(${idx})" id="opt-${idx}" class="btn-option w-full text-left p-4 rounded-xl flex items-center group">
                                            <span class="w-8 h-8 rounded-full bg-gray-100 text-gray-500 font-bold flex items-center justify-center mr-4 group-hover:bg-sage-dark group-hover:text-white transition ml-3">${String.fromCharCode(65 + idx)}</span>
                                            <span class="font-medium text-lg" dir="ltr">${opt}</span>
                                        </button>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <!-- Feedback Area (Hidden initially) -->
                            <div id="feedback-panel" class="hidden bg-gray-50 border-t border-gray-200 p-6 slide-in">
                                <div class="flex items-start gap-4">
                                    <div id="feedback-icon" class="text-3xl"></div>
                                    <div class="flex-grow">
                                        <h4 id="feedback-title" class="font-bold text-lg mb-1"></h4>
                                        <p id="feedback-text" class="text-gray-600 leading-relaxed"></p>
                                    </div>
                                </div>
                                <div class="mt-6 flex justify-end">
                                    <button onclick="app.nextQuestion()" class="btn-primary px-6 py-2 rounded-lg font-bold shadow-md">
                                        ${state.currentQuestionIndex === state.activeQuestions.length - 1 ? 'Ø¥Ù†Ù‡Ø§Ø¡ ÙˆØ¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬' : 'Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ'}
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-8 text-center">
                            <button onclick="app.showDashboard()" class="text-gray-400 hover:text-gray-600 text-sm underline">Ø§Ù„Ø®Ø±ÙˆØ¬ ÙˆØ§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                        </div>
                    </div>
                `;
            },

            checkAnswer: (selectedIdx) => {
                const q = state.activeQuestions[state.currentQuestionIndex];
                const isCorrect = selectedIdx === q.correct;
                
                // Save Result
                state.answers[q.id] = isCorrect;

                // Disable buttons
                const buttons = document.querySelectorAll('#options-container button');
                buttons.forEach(btn => btn.disabled = true);

                // UI Updates
                const selectedBtn = document.getElementById(`opt-${selectedIdx}`);
                const correctBtn = document.getElementById(`opt-${q.correct}`);

                if (isCorrect) {
                    selectedBtn.classList.add('selected-correct');
                } else {
                    selectedBtn.classList.add('selected-incorrect');
                    correctBtn.classList.add('correct-answer');
                }

                // Show Feedback
                const panel = document.getElementById('feedback-panel');
                const title = document.getElementById('feedback-title');
                const text = document.getElementById('feedback-text');
                const icon = document.getElementById('feedback-icon');

                panel.classList.remove('hidden');
                if (isCorrect) {
                    title.innerText = 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø£Ø­Ø³Ù†Øª';
                    title.className = 'font-bold text-lg mb-1 text-green-700';
                    icon.innerText = 'ğŸ‰';
                } else {
                    title.innerText = 'Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©';
                    title.className = 'font-bold text-lg mb-1 text-red-700';
                    icon.innerText = 'âš ï¸';
                }
                text.innerText = `Ø§Ù„ØªÙØ³ÙŠØ±: ${q.explanation}`;
            },

            nextQuestion: () => {
                if (state.currentQuestionIndex < state.activeQuestions.length - 1) {
                    state.currentQuestionIndex++;
                    app.renderQuizInterface();
                } else {
                    app.showResults();
                }
            },

            showResults: () => {
                const total = state.activeQuestions.length;
                const correctCount = state.activeQuestions.filter(q => state.answers[q.id]).length;
                const score = Math.round((correctCount / total) * 100);

                let msg = '';
                if (score >= 90) msg = 'Ø£Ø¯Ø§Ø¡ Ù…Ù…ØªØ§Ø²! Ø£Ù†Øª Ù…ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ù…Ø§Ø¯Ø©.';
                else if (score >= 70) msg = 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹! Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©.';
                else msg = 'ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªØ±ÙƒÙŠØ². Ù„Ø§ ØªÙŠØ£Ø³!';

                const container = document.getElementById('main-container');
                container.innerHTML = `
                    <div class="fade-in max-w-2xl mx-auto text-center pt-10">
                        <div class="bg-white rounded-2xl shadow-xl p-10 border border-gray-100">
                            <div class="w-24 h-24 bg-sage-light rounded-full flex items-center justify-center text-5xl mx-auto mb-6">
                                ${score >= 70 ? 'ğŸ†' : 'ğŸ“š'}
                            </div>
                            <h2 class="text-3xl font-bold text-gray-800 mb-2">Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
                            <div class="text-5xl font-extrabold text-sage-dark mb-4">%${score}</div>
                            <p class="text-xl text-gray-600 mb-8">${msg}</p>
                            
                            <div class="grid grid-cols-2 gap-4 mb-8 bg-gray-50 p-4 rounded-xl">
                                <div>
                                    <span class="block text-gray-400 text-sm">Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©</span>
                                    <span class="block text-2xl font-bold text-green-600">${correctCount}</span>
                                </div>
                                <div>
                                    <span class="block text-gray-400 text-sm">Ø¥Ø¬Ø§Ø¨Ø§Øª Ø®Ø§Ø·Ø¦Ø©</span>
                                    <span class="block text-2xl font-bold text-red-600">${total - correctCount}</span>
                                </div>
                            </div>

                            <div class="flex gap-4 justify-center">
                                <button onclick="app.showDashboard()" class="px-6 py-3 rounded-lg border border-gray-300 font-bold text-gray-600 hover:bg-gray-50 transition">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                                <button onclick="app.showAnalytics()" class="btn-primary px-6 py-3 rounded-lg font-bold shadow-lg transition">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡</button>
                            </div>
                        </div>
                    </div>
                `;
            },

            showAnalytics: () => {
                state.view = 'analytics';
                const container = document.getElementById('main-container');
                
                // Calculate Data
                const totalAnswered = Object.keys(state.answers).length;
                
                // Prepare Topic Data
                const topicLabels = sourceData.modules.map(m => m.title);
                const topicCounts = sourceData.modules.map(m => sourceData.questions.filter(q => q.module === m.id).length);
                
                // Prepare Performance Data
                const performanceData = sourceData.modules.map(m => {
                    const moduleQs = sourceData.questions.filter(q => q.module === m.id);
                    const answeredInModule = moduleQs.filter(q => state.answers.hasOwnProperty(q.id));
                    if (answeredInModule.length === 0) return 0;
                    const correct = answeredInModule.filter(q => state.answers[q.id]).length;
                    return Math.round((correct / answeredInModule.length) * 100);
                });

                container.innerHTML = `
                    <div class="fade-in max-w-6xl mx-auto">
                        <div class="mb-8">
                            <h2 class="text-3xl font-bold text-gray-800 mb-2">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
                            <p class="text-gray-600">Ù†Ø¸Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ø¹Ù„Ù‰ Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ£Ø¯Ø§Ø¦Ùƒ Ø§Ù„Ø´Ø®ØµÙŠ.</p>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                            <!-- Topic Distribution Chart -->
                            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                                <h3 class="text-lg font-bold text-gray-800 mb-4">ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹</h3>
                                <p class="text-sm text-gray-500 mb-4">ÙŠØ¹Ø±Ø¶ Ø­Ø¬Ù… Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ØªØ§Ø­ ÙÙŠ ÙƒÙ„ Ù‚Ø³Ù….</p>
                                <div class="chart-container">
                                    <canvas id="topicChart"></canvas>
                                </div>
                            </div>

                            <!-- User Performance Chart -->
                            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                                <h3 class="text-lg font-bold text-gray-800 mb-4">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø³Ù…</h3>
                                <p class="text-sm text-gray-500 mb-4">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø­Ù„Ùƒ Ù„Ù„Ø£Ø³Ø¦Ù„Ø©.</p>
                                ${totalAnswered === 0 
                                    ? '<div class="h-64 flex items-center justify-center text-gray-400 bg-gray-50 rounded-lg">Ù„Ù… ØªÙ‚Ù… Ø¨Ø­Ù„ Ø£ÙŠ Ø£Ø³Ø¦Ù„Ø© Ø¨Ø¹Ø¯ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</div>' 
                                    : '<div class="chart-container"><canvas id="perfChart"></canvas></div>'
                                }
                            </div>
                        </div>
                    </div>
                `;

                // Render Charts
                app.renderCharts(topicLabels, topicCounts, performanceData);
            },

            renderCharts: (labels, counts, perfData) => {
                // 1. Doughnut Chart (Topics)
                const ctx1 = document.getElementById('topicChart').getContext('2d');
                new Chart(ctx1, {
                    type: 'doughnut',
                    data: {
                        labels: labels,
                        datasets: [{
                            data: counts,
                            backgroundColor: ['#A3B18A', '#588157', '#3A5A40', '#DAD7CD', '#BC4749', '#F4A261'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'right', labels: { font: { family: 'Tajawal' } } }
                        }
                    }
                });

                // 2. Bar Chart (Performance) - Only if data exists
                const ctx2El = document.getElementById('perfChart');
                if (ctx2El) {
                    new Chart(ctx2El.getContext('2d'), {
                        type: 'bar',
                        data: {
                            labels: labels,
                            datasets: [{
                                label: 'Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯Ù‚Ø© (%)',
                                data: perfData,
                                backgroundColor: '#588157',
                                borderRadius: 6
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: { beginAtZero: true, max: 100 }
                            },
                            plugins: {
                                legend: { display: false }
                            }
                        }
                    });
                }
            }
        };

        // Initialize
        app.init();
    </script>
</body>
</html>